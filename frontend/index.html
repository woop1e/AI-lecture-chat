<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Lecture Assistant</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>AI Lecture Assistant</h1>
            <p>Upload lecture videos and chat with AI about the content</p>
        </header>

        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="upload">Upload</button>
            <button class="nav-tab" data-tab="chat">Chat</button>
            <button class="nav-tab" data-tab="history">History</button>
        </div>

        <div id="upload-section" class="tab-content">
            <div class="card">
                <h2 style="margin-bottom: 20px;">Upload Lecture Video</h2>
                <div class="upload-area" id="upload-area">
                    <p style="font-size: 3rem; margin-bottom: 10px;">üìÅ</p>
                    <p style="font-size: 1.1rem; margin-bottom: 10px;">Drag & drop your lecture video here</p>
                    <p style="margin: 15px 0; color: var(--text-light);">or</p>
                    <button class="btn btn-primary" onclick="document.getElementById('video-input').click()">
                        Choose File
                    </button>
                    <input type="file" id="video-input" accept="video/*" style="display: none;">
                    <p style="margin-top: 20px; font-size: 0.9rem; color: var(--text-light);">
                        Supported formats: MP4, AVI, MOV, MKV (Max 500MB)
                    </p>
                </div>
                <div id="file-selected" class="hidden" style="margin-top: 20px; padding: 20px; background: #f0fdf4; border-radius: 8px;">
                    <p style="margin-bottom: 8px;"><strong>Selected:</strong> <span id="file-name"></span></p>
                    <p style="margin-bottom: 15px;"><strong>Size:</strong> <span id="file-size"></span></p>
                    <button class="btn btn-primary" id="upload-btn">Upload Video</button>
                </div>
            </div>
        </div>

        <div id="processing-section" class="tab-content hidden">
            <div class="card">
                <h2>Processing Video</h2>
                <p style="color: var(--text-light); margin-bottom: 20px;">
                    Please wait while we analyze your lecture...
                </p>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p style="text-align: center; margin-top: 10px; font-weight: 600; color: var(--primary);" id="progress-text">0%</p>
                </div>

                <div id="processing-steps">
                    <div class="step" id="step-audio">
                        <span>‚è≥</span>
                        <span>Extracting audio from video</span>
                    </div>
                    <div class="step" id="step-frames">
                        <span>‚è≥</span>
                        <span>Extracting video frames</span>
                    </div>
                    <div class="step" id="step-transcript">
                        <span>‚è≥</span>
                        <span>Transcribing speech with AI</span>
                    </div>
                    <div class="step" id="step-ocr">
                        <span>‚è≥</span>
                        <span>Reading text from slides</span>
                    </div>
                    <div class="step" id="step-combine">
                        <span>‚è≥</span>
                        <span>Combining all data</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="chat-section" class="tab-content hidden">
            <div class="chat-container">
                <div class="history-sidebar">
                    <h3 style="margin-bottom: 15px; font-size: 1rem;">Recent Sessions</h3>
                    <div id="session-list">
                        <p style="color: var(--text-light); font-size: 0.9rem;">No sessions yet</p>
                    </div>
                </div>

                <div class="chat-main">
                    <div class="chat-header">
                        <h2 style="font-size: 1.2rem;">Chat with AI</h2>
                        <button class="btn btn-primary" id="new-video-btn" style="padding: 8px 16px; font-size: 0.9rem;">
                            Upload New Video
                        </button>
                    </div>

                    <div class="chat-messages" id="chat-messages">
                        <div class="message bot-message">
                            <div class="message-content">
                                <p>Hello! I've analyzed your lecture. Ask me anything about the content!</p>
                            </div>
                        </div>
                    </div>

                    <div class="chat-input-area">
                        <textarea 
                            id="chat-input" 
                            placeholder="Ask a question about the lecture..."
                            rows="1"
                            autocomplete="off"
                        ></textarea>
                        <button class="btn btn-primary" id="send-btn" style="padding: 14px 28px;">Send</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Section -->
        <div id="history-section" class="tab-content hidden">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2>Chat History</h2>
                    <button class="btn btn-primary" id="refresh-history-btn" style="padding: 8px 16px; font-size: 0.9rem;">
                        Refresh
                    </button>
                </div>
                <div id="full-history">
                    <p style="color: var(--text-light);">No chat history available</p>
                </div>
            </div>
        </div>
    </div>

    <div class="status-bar hidden" id="status-bar">
        <span id="status-message"></span>
    </div>

    <script src="app.js"></script>
</body>
</html>